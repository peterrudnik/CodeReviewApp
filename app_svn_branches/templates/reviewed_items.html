{% extends "base.html" %}

{% block content %}

    <table id="main">
        <thead>
            <tr>
                <th>created</th>
                <th>Reviewed item</th>
                <th>type</th>
                <th>reviewed_aspect</th>
                <th>creator</th>
                <th>reviewed</th>
                <th>reviewer</th>
                <th>approved</th>
            </tr>
        </thead>
        <tbody>
           {% for review_item in review_items %}
            <tr>
                <td>{{review_item.creation_date|datetime('medium')}}</td>
                <td>{{review_item.name}}</td>
                <td>{{review_item.review_type.name}}</td>
                <td>{{review_item.reviewed_aspect}}</td>
                <td>{{review_item.creator.name}}</td>
                <!--
                <td>reviews: {{review_item.reviews|length}}</td>
                -->

                {% if review_item.reviews|length > 0 %}
                    {% for review in review_item.reviews %}
                        {% if loop.index == 1 %}
                            <td><span class = "review-text">{{review.review_date}}</span></td>
                            <td><span class = "review-text">{{review.reviewer.name}}</span></td>
                            {% if review.approved == true %}
                                <td><span class = "review-text">{{review.approved}}</span></td>
                            {% else %}
                                <td><span class = "warning">{{review.approved}}</span></td>
                            {% endif %}
                        {% else %}
                            <tr>
                                <!-- <td>{{loop.index}}</td> -->
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td><span class = "review-text">{{review.review_date}}</span></td>
                                <td><span class = "review-text">{{review.reviewer.name}}</span></td>
                                {% if review.approved == true %}
                                    <td><span class = "review-text">{{review.approved}}</span></td>
                                {% else %}
                                    <td><span class = "warning">{{review.approved}}</span></td>
                                {% endif %}
                           </tr>
                        {% endif %}
                    {% endfor %}
                {% else %}
                    <td><span class = "warning">no review</span></td>
                    <td></td>
                    <td></td>
                {% endif %}
            </tr>
            {% endfor %}
        </tbody>
    </table>

{% endblock %}